## Initial Data Exploration

There are two datasets uploaded to the drive link [Link](https://drive.google.com/file/d/1-mcxG5vkukTra9KbgP-t1GuuHXzTTc4N/view?usp=drive_link). This document will focus on exploring these files.

### File 1 - 4b08bec0-4bf5-4bc6-abc6-d455f0ade784

File contains a single folder named 'Hyper' which contains a zip file named: `PRS_L2D_STD_20231229050902_20231229050907_0001.zip`

Inside this zip file there is a single .he5 file which is named: 

`PRS_L2D_STD_20231229050902_20231229050907_0001.he5`

The components of the file are as follows:

```
'HDFEOS',
 'HDFEOS/SWATHS',
 'HDFEOS/SWATHS/GCP attributes',
 'HDFEOS/SWATHS/Geocoding attributes',
 'HDFEOS/SWATHS/Geocoding attributes/Ancillary',
 'HDFEOS/SWATHS/PRS_L2D_HCO',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Data Fields',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Data Fields/SWIR_Cube',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Data Fields/SWIR_PIXEL_L2_ERR_MATRIX',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Data Fields/VNIR_Cube',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Data Fields/VNIR_PIXEL_L2_ERR_MATRIX',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Geocoding Model',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Geolocation Fields',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Geolocation Fields/Latitude',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Geolocation Fields/Longitude',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Geolocation Fields/Time',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Geometric Fields',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Geometric Fields/Observing_Angle',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Geometric Fields/Rel_Azimuth_Angle',
 'HDFEOS/SWATHS/PRS_L2D_HCO/Geometric Fields/Solar_Zenith_Angle',
 'HDFEOS/SWATHS/PRS_L2D_PCO',
 'HDFEOS/SWATHS/PRS_L2D_PCO/Data Fields',
 'HDFEOS/SWATHS/PRS_L2D_PCO/Data Fields/Cube',
 'HDFEOS/SWATHS/PRS_L2D_PCO/Data Fields/PIXEL_L2_ERR_MATRIX',
 'HDFEOS/SWATHS/PRS_L2D_PCO/Geocoding Model',
 'HDFEOS/SWATHS/PRS_L2D_PCO/Geolocation Fields',
 'HDFEOS/SWATHS/PRS_L2D_PCO/Geolocation Fields/Latitude',
 'HDFEOS/SWATHS/PRS_L2D_PCO/Geolocation Fields/Longitude',
 'HDFEOS/SWATHS/PRS_L2D_PCO/Geolocation Fields/Time',
 'HDFEOS INFORMATION',
 'Info',
 'Info/Ancillary',
 'Info/Ancillary/GyroData',
 'Info/Ancillary/GyroData/Gyro_1_data_angle',
 'Info/Ancillary/GyroData/Gyro_1_data_byte',
 'Info/Ancillary/GyroData/Gyro_2_data_angle',
 'Info/Ancillary/GyroData/Gyro_2_data_byte',
 'Info/Ancillary/GyroData/Gyro_3_data_angle',
 'Info/Ancillary/GyroData/Gyro_3_data_byte',
 'Info/Ancillary/GyroData/Gyro_4_data_angle',
 'Info/Ancillary/GyroData/Gyro_4_data_byte',
 'Info/Ancillary/GyroData/Gyro_5_data_angle',
 'Info/Ancillary/GyroData/Gyro_5_data_byte',
 'Info/Ancillary/GyroData/Gyro_6_data_angle',
 'Info/Ancillary/GyroData/Gyro_6_data_byte',
 'Info/Ancillary/GyroData/Star_sensors__Gyros_Data_validity',
 'Info/Ancillary/PVSdata',
 'Info/Ancillary/PVSdata/AOCS_Stat',
 'Info/Ancillary/PVSdata/Clock_Bias',
 'Info/Ancillary/PVSdata/Clock_Bias_Rate',
 'Info/Ancillary/PVSdata/GPS_Time_of_Last_Position',
 'Info/Ancillary/PVSdata/Gdop',
 'Info/Ancillary/PVSdata/Number_of_Satellites',
 'Info/Ancillary/PVSdata/Week_Number',
 'Info/Ancillary/PVSdata/Wgs84_pos_x',
 'Info/Ancillary/PVSdata/Wgs84_pos_y',
 'Info/Ancillary/PVSdata/Wgs84_pos_z',
 'Info/Ancillary/PVSdata/Wgs84_vel_x',
 'Info/Ancillary/PVSdata/Wgs84_vel_y',
 'Info/Ancillary/PVSdata/Wgs_84_vel_z',
 'Info/Ancillary/StarTracker1',
 'Info/Ancillary/StarTracker1/NAV_APROP_EKF_values',
 'Info/Ancillary/StarTracker1/Navigation_time',
 'Info/Ancillary/StarTracker1/q_ECI_2_Body_1',
 'Info/Ancillary/StarTracker1/q_ECI_2_Body_2',
 'Info/Ancillary/StarTracker1/q_ECI_2_Body_3',
 'Info/Ancillary/StarTracker1/q_ECI_2_Body_4',
 'Info/Ancillary/StarTracker1/w_body_1',
 'Info/Ancillary/StarTracker1/w_body_2',
 'Info/Ancillary/StarTracker1/w_body_3',
 'Info/Ancillary/StarTracker2',
 'Info/Ancillary/StarTracker2/Attitude_status_ss',
 'Info/Ancillary/StarTracker2/Data_valid_ss',
 'Info/Ancillary/StarTracker2/Omega_x_ss',
 'Info/Ancillary/StarTracker2/Omega_y_ss',
 'Info/Ancillary/StarTracker2/Omega_z_ss',
 'Info/Ancillary/StarTracker2/Quaternion_1_ss',
 'Info/Ancillary/StarTracker2/Quaternion_2_ss',
 'Info/Ancillary/StarTracker2/Quaternion_3_ss',
 'Info/Ancillary/StarTracker2/Quaternion_4_ss',
 'Info/Ancillary/StarTracker2/Time_day_ss',
 'Info/Ancillary/StarTracker2/Time_msec_ss',
 'Info/Header',
 'Info/Header/FrameNumber',
 'Info/Header/Frame_Corrupted',
 'Info/Header/Frame_Missing',
 'KDP_AUX',
 'KDP_AUX/Cw_Swir_Matrix',
 'KDP_AUX/Cw_Vnir_Matrix',
 'KDP_AUX/Fwhm_Swir_Matrix',
 'KDP_AUX/Fwhm_Vnir_Matrix',
 'KDP_AUX/LOS_Pan',
 'KDP_AUX/LOS_Swir',
 'KDP_AUX/LOS_Vnir'
 ```

 In addition to the components, there is also metadata at the root of the file, the keys of which are shown below. Note that these metadata tags are common to the dataset and are *extremely* important to the processing of the data.

 ```
 'Acquisition_Purpose',
 'Acquisition_Size',
 'Acquisition_Station',
 'Acquisition_Type',
 'Atm_LutGeomInfo_RelativeAzimuth',
 'Atm_LutGeomInfo_SunZenith',
 'Atm_LutGeomInfo_ViewZenith',
 'Atm_Lut_version',
 'Atmo_RTM_info',
 'Atmo_profile_info',
 'Aux_SunEarthDistance',
 'Aux_SunIrradiance',
 'CNM_L2_BINNING',
 'CNM_L2_BIN_ON',
 'CNM_L2_BSEL_ON',
 'CNM_L2_HGRP',
 'CNM_PAN_ACQ',
 'CNM_SWIR_ACQ',
 'CNM_SWIR_SELECT',
 'CNM_VNIR_ACQ',
 'CNM_VNIR_SELECT',
 'Cloudy_pixels_percentage',
 'DEM_info',
 'Epsg_Code',
 'Exit_Code',
 'Frame_Type',
 'GCP_info',
 'ISF_ID_Start',
 'Image_ID',
 'Integration_Time',
 'L1_Processor_Version',
 'L1_Quality_CCPerc',
 'L2ScalePanMax',
 'L2ScalePanMin',
 'L2ScaleSwirMax',
 'L2ScaleSwirMin',
 'L2ScaleVnirMax',
 'L2ScaleVnirMin',
 'L2d_Quality_flags',
 'List_Cw_Swir',
 'List_Cw_Swir_Flags',
 'List_Cw_Vnir',
 'List_Cw_Vnir_Flags',
 'List_Fwhm_Swir',
 'List_Fwhm_Vnir',
 'Main_Electornic_Unit',
 'Map_AOT_accuracy',
 'Map_WV_accuracy',
 'Num_Frames',
 'Number_of_ISF',
 'PANCorruptedFrameList',
 'PAN_ACQ',
 'PAN_Corrupted_Frame_Percentage',
 'PAN_HGRP',
 'PAN_HYP_ACT_RESIDUAL_m',
 'PAN_HYP_ALT_RESIDUAL_m',
 'PAN_HYP_START_SYNC_FRAME',
 'PAN_HYP_START_SYNC_SUBFRAME',
 'PAN_HYP_STOP_SYNC_FRAME',
 'PAN_HYP_STOP_SYNC_SUBFRAME',
 'PAN_Int_Time',
 'PE_Gain_SWIR',
 'PE_Gain_VNIR',
 'Pan_N_Int',
 'Pan_Num_Frames',
 'Prev_Cdp_File_Name',
 'Prev_FKdp_File_Name',
 'Prev_Gkdp_File_Name',
 'Processing_Level',
 'Processing_Station',
 'Processing_Time',
 'Processor_Name',
 'Processor_Version',
 'Product_ID',
 'Product_LLcorner_easting',
 'Product_LLcorner_lat',
 'Product_LLcorner_long',
 'Product_LLcorner_northing',
 'Product_LRcorner_easting',
 'Product_LRcorner_lat',
 'Product_LRcorner_long',
 'Product_LRcorner_northing',
 'Product_Name',
 'Product_StartTime',
 'Product_StopTime',
 'Product_ULcorner_easting',
 'Product_ULcorner_lat',
 'Product_ULcorner_long',
 'Product_ULcorner_northing',
 'Product_URcorner_easting',
 'Product_URcorner_lat',
 'Product_URcorner_long',
 'Product_URcorner_northing',
 'Product_center_easting',
 'Product_center_lat',
 'Product_center_long',
 'Product_center_northing',
 'Projection_Id',
 'Projection_Name',
 'Reference_Ellipsoid',
 'SWIRCorruptedFrameList',
 'SWIR_BNSTART',
 'SWIR_BNSTOP',
 'SWIR_Corrupted_Frame_Percentage',
 'SWIR_HGRP',
 'SWIR_X',
 'Sea_pixels_percentage',
 'Soi_L0a_EO-EOS',
 'Soi_Post_Dark_Calibration_L0aFile',
 'Soi_Prev_Dark_Calibration_L0aFile',
 'Sun_azimuth_angle',
 'Sun_zenith_angle',
 'Synch_Time',
 'VNIRCorruptedFrameList',
 'VNIR_BNSTART',
 'VNIR_BNSTOP',
 'VNIR_Corrupted_Frame_Percentage',
 'VNIR_HGRP',
 'VNIR_X'
```
 ### File 2 - 6a4afb36-45f9-499a-8435-01a51f141db4

The file contains a single .tif file in a folder named Thermal. The file is named: `LC09_L2SP_147049_20251121_20251122_02_T1_ST_B10.TIF`

There is definitely some information about the file in the file name, but we will not extract it from there. Rather, there ought to be structured metadata in the file itself that can be extracted in a lazy manner.

There are 4 sources of information from the TIF file that we can extract:
1. profile
2. tags() - a method
3. bounds
4. descriptions

We'll probably store it in a single object in the end. Running a simple analysis shows the following:

```python
FILE_NAME = "raw_files/Thermal/LC09_L2SP_147049_20251121_20251122_02_T1_ST_B10.TIF"
with rasterio.open(FILE_NAME) as src:

    print("====== Profile ======")
    print(src.profile)

    print("====== Tags ======")
    print(src.tags())

    print("====== Bounds ======")
    print(src.bounds)

    print("====== Descriptions ======")
    print(src.descriptions)
```

The output of the above code is as follows:
```shell
====== Profile ======
{'driver': 'GTiff', 'dtype': 'uint16', 'nodata': 0.0, 'width': 7641, 'height': 7781, 'count': 1, 'crs': CRS.from_wkt('PROJCS["WGS 84 / UTM zone 43N",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",75],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["Easting",EAST],AXIS["Northing",NORTH],AUTHORITY["EPSG","32643"]]'), 'transform': Affine(30.0, 0.0, 201885.0,
       0.0, -30.0, 1875015.0), 'blockxsize': 256, 'blockysize': 256, 'tiled': True, 'compress': 'deflate', 'interleave': 'band'}
====== Tags ======
{'AREA_OR_POINT': 'Point'}
====== Bounds ======
BoundingBox(left=201885.0, bottom=1641585.0, right=431115.0, top=1875015.0)
====== Descriptions ======
(None,)
```

The field available are as follows:
|Field| Available From | Significance|
|-----|----------------|------------|
driver| profile | The driver of the file - GTiff|
dtype| profile | The data type of the file - uint16. This means every pixel is a number between 0 and 65535.|
nodata | profile | Means every pixel with a value of 0 is empty |
width | profile | The width of the image in pixels |
height | profile | The height of the image in pixels |
count | profile | The number of bands in the image |
crs | profile | The coordinate reference system of the image |
compress | profile | The compression algorithm used to compress the image |
interleave | profile | The interleave order of the image |
blockxsize, blockysize | profile | This setting determines how the image data is physically cut up and stored on your hard drive |
transform | profile | The transformation matrix of the image which converts each pixel into a coordinate in the coordinate reference system|
AREA_OR_POINT | tags() | 'Point': The coordinate (e.g., Lat/Lon) refers to the exact center of the pixel.,'Area': The coordinate refers to the top-left corner of the pixel.|


We will be storing all this information in a single object.




